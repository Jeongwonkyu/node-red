<script type="text/javascript">
  RED.nodes.registerType("signal-filter", {
    category: "Signal",
    color: "#a6bbcf",
    defaults: {
      name: { value: "" },
      // buttonState: { value: true },
      tagname: { value: "TagA", validate: RED.validators.regex(/[a-z]+/) },
    },
    inputs: 1,
    outputs: 1,
    icon: "bridge.svg",
    label: function () {
      return this.name || "signal-filter";
    },
    labelStyle: function () {
      return this.name ? "node_label_italic" : "";
    },
    align: "left",
    button: {
      // toggle: "buttonState",
      enabled: function () {
        return !this.changed;
      },
      visible: function () {
        return this.hasButton;
      },
      onclick: function () {},
    },
    // called immediately before the dialog is displayed.
    oneditprepare: function () {
      $(".my-button-group").on("click", function () {
        $(".my-button-group").removeClass("selected");
        $(this).addClass("selected");
      });

      $("#node-input-example2").typedInput({
        type: "json",
        types: ["json"],
      });

      $("#node-input-example3").typedInput({
        type: "msg",
        types: ["msg", "flow", "global"],
        typeField: "#node-input-example3-type",
      });

      $("#node-input-tagname").typedInput({
        types: [
          {
            value: "fruit",
            options: [
              { value: "TagA", label: "TagA" },
              { value: "TagB", label: "TagB" },
              { value: "TagC", label: "TagC" },
              { value: "TagD", label: "TagD" },
              { value: "TagE", label: "TagE" },
            ],
          },
        ],
      });

      $("#node-input-example5").typedInput({
        types: [
          {
            value: "fruit",
            multiple: "true",
            options: [
              { value: "apple", label: "Apple" },
              { value: "banana", label: "Banana" },
              { value: "cherry", label: "Cherry" },
            ],
          },
        ],
      });
    },
    // called when the edit dialog is okayed.
    // oneditsave: function () {},
    // called when the edit dialog is canceled.
    // oneditcancel: function () {},
    // called when the delete button in a configuration nodeâ€™s edit dialog is pressed.
    // oneditdelete: function () {},
    // called when the edit dialog is resized.
    // oneditresize: function () {} 
  });
</script>

<script type="text/html" data-template-name="signal-filter">
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name" />
  </div>
  <div class="form-row">
    <button type="button" class="red-ui-button">Button</button>
  </div>
  <div class="form-row">
    <button type="button" class="red-ui-button red-ui-button-small">
      Button
    </button>
  </div>
  <div class="form-row">
    <span class="button-group">
      <button
        type="button"
        class="red-ui-button toggle selected my-button-group"
      >
        b1</button
      ><button type="button" class="red-ui-button toggle my-button-group">
        b2</button
      ><button type="button" class="red-ui-button toggle my-button-group">
        b3
      </button>
    </span>
  </div>
  <div class="form-row">
    <input type="text" id="node-input-example1" />
    <input type="hidden" id="node-input-example1-type" />
  </div>

  <div class="form-row">
    <input type="text" id="node-input-example2" />
  </div>

  <div class="form-row">
    <input type="text" id="node-input-example3" />
    <input type="hidden" id="node-input-example3-type" />
  </div>

  <div class="form-row">
    <label for="node-input-tagname"><i class="fa fa-bookmark"></i> Signal</label>
    <input type="text" id="node-input-tagname" />
  </div>

  <div class="form-row">
    <input type="text" id="node-input-example5" />
  </div>
</script>

<script type="text/html" data-help-name="signal-filter">
  <p>
    A simple node that converts the message payloads into all signal-filter
    characters
  </p>
</script>
